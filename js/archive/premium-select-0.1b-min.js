/*
 * Premium Select v0.1 Beta
 * 
 * @Author Jocko MacGregor for Ballantine Digital Media (http://www.bdmedia.com)
 * @Version 0.1b
 * 
 * A jQuery plugin for custom styling your select drop downs.
 * 
 * This code is based on the code presented in a tutorial by Martin Angelov
 * for tutorialzine.com.  To read the tutorial visit:
 * 
 * http://tutorialzine.com/2010/11/better-select-jquery-css3/
 */var console=console||{info:function(){}};$.fn.premiumSelect=function(){var e=$(this).filter("select");e.each(function(){$.premiumselect.init($(this))})};$.premiumselect={init:function(e){$.premiumselect.buildInterface(e)},buildInterface:function(e){var t,n=e.data("has-icon")===1,r=e.data("select-width"),i=e.data("list-width");console.info(e.data("has-icon"));console.info(n);var s=e.data("theme"),o=$("<div>");o.attr("width",e.outerWidth());o.attr("id",(t=e.attr("id"))?t:null);o.addClass("premiumSelect");s&&o.addClass(s);r&&o.attr("style","min-width: "+r);o.html('<div class="selectBox"></div>');var u=$("<ul>");u.addClass("dropDown");i&&u.attr("style","width: "+i);var a=o.find(".selectBox");a.attr("class","selectBox "+e.attr("class"));a.removeClass("premiumSelect");e.find("option").each(function(){var t=$(this),r=t.data("disabled")===1,i=t.data("prevent-click")!==1;e.val()===t.val()&&a.html(t.text());if(t.data("skip"))return!0;var s="",o,f=1,l,c,h;n&&(s+=(o=t.data("icon"))?'<img src="'+o+'" />':"");f=1;l=(c=t.data("line-"+f))?c:null;while(l){h=n?" has-icon":"";s+='<span class="line-'+f+h+'">'+l+"</span>";f++;l=(c=t.data("line-"+f))?c:null}if(!l&&f===1){h=n?" has-icon":"";s+='<span class="line-'+f+h+'">'+t.text()+"</span>"}var p=t[0],d=e.find("option[data-skip!=1]")[0],v=e.find("option[data-skip!=1]:last")[0],m=p===d?" first":p===v?" last":null,g=t.attr("selected")?" active":null,y=r?" disabled":null,b=t.attr("class")+" "+m+g+y,w=$("<li>");w.attr("class",b);w.removeClass("premiumSelect");w.html(s);w.data("select",e);w.data("option",t);!r&&i&&w.click(function(e){e.preventDefault();var t=$(this),n=$.premiumselect.getSelectBox(t),r=t.data("select"),i=t.data("option"),s=$.premiumselect.getDropDown(t);n.html(i.text());s.trigger("hide");r.val(i.val());var o=t.closest("ul"),u=o.data("val");o.children().removeClass("active");t.addClass("active");o.data("val",i.val());r.trigger("click");u!==i.val()&&r.trigger("change");return!1});u.append(w)});o.append(u.hide());e.hide().after(o);u.bind("show",function(){var e=$(this);if(e.is(":animated"))return!1;var t=$.premiumselect.getSelectBox(e);t.addClass("expanded");e.slideDown()}).bind("hide",function(){var e=$(this);if(e.is(":animated"))return!1;var t=$.premiumselect.getSelectBox(e);t.removeClass("expanded");e.slideUp()}).bind("toggle",function(){var e=$(this),t=$.premiumselect.getSelectBox(e);t.hasClass("expanded")?e.trigger("hide"):e.trigger("show")});a.click(function(){var e=$.premiumselect.getDropDown($(this));e.trigger("toggle");return!1});$(document).click(function(){$(".dropDown").trigger("hide")})},getSelectBox:function(e){return e.closest(".premiumSelect").find(".selectBox")},getDropDown:function(e){return e.closest(".premiumSelect").find(".dropDown")}};$(document).ready(function(){$("select.premiumSelect").premiumSelect()});