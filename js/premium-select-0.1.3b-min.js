/*
 * Premium Select v0.1.3 Beta
 * 
 * @Author Jocko MacGregor for Ballantine Digital Media (http://www.bdmedia.com)
 * @Version 0.1.3b
 * 
 * A jQuery plugin for custom styling your select drop downs.
 * 
 * This code is based on the code presented in a tutorial by Martin Angelov
 * for tutorialzine.com.  To read the tutorial visit:
 * 
 * http://tutorialzine.com/2010/11/better-select-jquery-css3/
 */var console=console||{info:function(){}};$.fn.premiumSelect=function(e){var t=$(this).filter("select");t.each(function(){typeof e=="string"?$.premiumselect.execute($(this),e):$.premiumselect.init($(this),e)})};$.premiumselect={init:function(e,t){var n={has_icon:!1,select_width:null,list_width:null,theme:null},r=$.premiumselect.extractDataAttributes(e);t=$.extend({},n,t,r);e.next().filter("div.premiumSelect").remove();$.premiumselect.buildInterface(e,t)},execute:function(e,t){var n=$.premiumselect.getDropDown(e);switch(t){case"show":n.trigger("show");break;case"hide":n.trigger("hide");break;case"toggle":n.trigger("toggle");break;case"destroy":}},extractDataAttributes:function(e){var t={};e.data("has-icon")&&(t.has_icon=e.data("has-icon")===1);e.data("select-width")&&(t.select_width=e.data("select-width"));e.data("list-width")&&(t.list_width=e.data("list-width"));e.data("theme")&&(t.theme=e.data("theme"));return t},buildInterface:function(e,t){var n,r=t.has_icon,i=t.select_width,s=t.list_width,o=t.theme,u=$("<div>");u.attr("width",e.outerWidth());u.attr("id",(n=e.attr("id"))?n:null);u.addClass("premiumSelect");o&&u.addClass(o);i&&u.attr("style","min-width: "+i);u.html('<div class="selectBox"></div>');var a=$("<ul>");a.addClass("dropDown");s&&a.attr("style","width: "+s);var f=u.find(".selectBox");f.attr("class","selectBox "+e.attr("class"));f.removeClass("premiumSelect");e.find("option").each(function(){var t=$(this),n=t.data("disabled")===1,i=t.data("prevent-click")!==1;e.val()===t.val()&&f.html(t.text());if(t.data("skip"))return!0;var s="",o,u=1,l,c,h;r&&(s+=(o=t.data("icon"))?'<img src="'+o+'" />':"");u=1;l=(c=t.data("line-"+u))?c:null;while(l){h=r?" has-icon":"";s+='<span class="line-'+u+h+'">'+l+"</span>";u++;l=(c=t.data("line-"+u))?c:null}if(!l&&u===1){h=r?" has-icon":"";s+='<span class="line-'+u+h+'">'+t.text()+"</span>"}var p=t[0],d=e.find("option[data-skip!=1]")[0],v=e.find("option[data-skip!=1]:last")[0],m=p===d?" first":p===v?" last":null,g=t.attr("selected")?" active":null,y=n?" disabled":null,b=t.attr("class")+" "+m+g+y,w=$("<li>");w.attr("class",b);w.removeClass("premiumSelect");w.html(s);w.data("select",e);w.data("option",t);!n&&i&&w.click(function(e){e.preventDefault();var t=$(this),n=$.premiumselect.getSelectBox(t),r=t.data("select"),i=t.data("option"),s=$.premiumselect.getDropDown(t);n.html(i.text());s.trigger("hide");r.val(i.val());var o=t.closest("ul"),u=o.data("val");o.children().removeClass("active");t.addClass("active");o.data("val",i.val());r.trigger("click");u!==i.val()&&r.trigger("change");return!1});a.append(w)});u.append(a.hide());e.hide().after(u);a.bind("show",function(){var e=$(this);if(e.is(":animated"))return!1;var t=$.premiumselect.getSelectBox(e);t.addClass("expanded");e.slideDown()}).bind("hide",function(){var e=$(this);if(e.is(":animated"))return!1;var t=$.premiumselect.getSelectBox(e);t.removeClass("expanded");e.slideUp()}).bind("toggle",function(){var e=$(this),t=$.premiumselect.getSelectBox(e);t.hasClass("expanded")?e.trigger("hide"):e.trigger("show")});f.click(function(){var e=$.premiumselect.getDropDown($(this));e.trigger("toggle");return!1});$(document).click(function(){$(".dropDown").trigger("hide")})},getSelectBox:function(e){return e.closest(".premiumSelect").find(".selectBox")},getDropDown:function(e){e.filter("select").size()>0&&(e=e.next(".premiumSelect"));return e.closest(".premiumSelect").find(".dropDown")}};$(document).ready(function(){$("select.premiumSelect").premiumSelect()});