/*
 * Premium Select v0.1.3 Beta
 * 
 * @Author Jocko MacGregor for Ballantine Digital Media (http://www.bdmedia.com)
 * @Version 0.1.3b
 * 
 * A jQuery plugin for custom styling your select drop downs.
 * 
 * This code is based on the code presented in a tutorial by Martin Angelov
 * for tutorialzine.com.  To read the tutorial visit:
 * 
 * http://tutorialzine.com/2010/11/better-select-jquery-css3/
 */var console=console||{info:function(){}};$.fn.premiumSelect=function(e){var t=$(this).filter("select");t.each(function(){typeof e=="string"?$.premiumselect.execute($(this),e):$.premiumselect.init($(this),e)})};$.premiumselect={init:function(e,t){var n={has_icon:!1,select_width:null,list_width:null,theme:null,hover_activated:!1},r=$.premiumselect.extractDataAttributes(e);t=$.extend({},n,t,r);e.next().filter("div.premiumSelect").remove();$.premiumselect.buildInterface(e,t)},execute:function(e,t){var n=$.premiumselect.getDropDown(e);switch(t){case"show":n.trigger("show");break;case"hide":n.trigger("hide");break;case"toggle":n.trigger("toggle");break;case"destroy":}},extractDataAttributes:function(e){var t={};e.data("has-icon")&&(t.has_icon=e.data("has-icon")===1);e.data("select-width")&&(t.select_width=e.data("select-width"));e.data("list-width")&&(t.list_width=e.data("list-width"));e.data("theme")&&(t.theme=e.data("theme"));e.data("hover-activated")&&(t.hover_activated=e.data("hover-activated")===1);return t},buildInterface:function(e,t){var n=e.attr("id")?e.attr("id"):"ps"+parseInt(Math.random()*1e6,10),r=t.has_icon,i=t.select_width,s=t.list_width,o=t.theme,u=$("<div>");u.attr("width",e.outerWidth());u.attr("id",n);u.addClass("premiumSelect");o&&u.addClass(o);i&&u.attr("style","min-width: "+i);u.html('<div id="'+n+'_selectBox" class="selectBox"></div>');var a=$('<ul id="'+n+'_list">');a.addClass("dropDown");s&&a.attr("style","width: "+s);var f=u.find(".selectBox");f.attr("class","selectBox "+e.attr("class"));f.removeClass("premiumSelect");e.find("option").each(function(t){var i=$(this),s=n+"_option_"+t,o=i.data("disabled")===1,u=i.data("prevent-click")!==1;e.val()===i.val()&&f.html(i.text());if(i.data("skip"))return!0;var l="",c,h=1,p,d,v;r&&(l+=(c=i.data("icon"))?'<img id="'+n+'_icon" src="'+c+'" />':"");h=1;p=(d=i.data("line-"+h))?d:null;var m="";while(p){v=r?" has-icon":"";m=s+"_option_line_"+h;l+='<span id="'+m+'" class="line-'+h+v+'">'+p+"</span>";h++;p=(d=i.data("line-"+h))?d:null}if(!p&&h===1){v=r?" has-icon":"";m=s+"_option_line_"+h;l+='<span id="'+m+'" class="line-'+h+v+'">'+i.text()+"</span>"}var g=i[0],y=e.find("option[data-skip!=1]")[0],b=e.find("option[data-skip!=1]:last")[0],w=g===y?" first":g===b?" last":"",E=i.attr("selected")?" active":"",S=o?" disabled":"",x=i.attr("class")+" "+w+E+S,T=$('<li id="'+s+'">');T.attr("class",x);T.removeClass("premiumSelect");T.html(l);T.data("select",e);T.data("option",i);!o&&u&&T.click(function(e){e.preventDefault();var t=$(this),n=$.premiumselect.getSelectBox(t),r=t.data("select"),i=t.data("option"),s=$.premiumselect.getDropDown(t);n.html(i.text());s.trigger("hide");r.val(i.val());var o=t.closest("ul"),u=o.data("val");o.children().removeClass("active");t.addClass("active");o.data("val",i.val());r.trigger("click");u!==i.val()&&r.trigger("change");return!1});a.append(T)});u.append(a.hide());e.hide().after(u);a.bind("show",function(){var e=$(this);if(e.is(":animated"))return!1;var t=$.premiumselect.getSelectBox(e);t.addClass("expanded");e.slideDown()}).bind("hide",function(){var e=$(this);if(e.is(":animated"))return!1;var t=$.premiumselect.getSelectBox(e);t.removeClass("expanded");e.slideUp()}).bind("toggle",function(){var e=$(this),t=$.premiumselect.getSelectBox(e);t.hasClass("expanded")?e.trigger("hide"):e.trigger("show")});f.click(function(){var e=$.premiumselect.getDropDown($(this));e.trigger("toggle");return!1});t.hover_activated&&u.mouseover(function(){var e=$(this),t=$.premiumselect.getDropDown(e);t.trigger("show")}).mouseleave(function(){var e=$(this),t=$.premiumselect.getDropDown(e);t.trigger("hide")});$(document).click(function(){$(".dropDown").trigger("hide")})},getSelectBox:function(e){return e.closest(".premiumSelect").find(".selectBox")},getDropDown:function(e){e.filter("select").size()>0&&(e=e.next(".premiumSelect"));return e.closest(".premiumSelect").find(".dropDown")}};$(document).ready(function(){$("select.premiumSelect").premiumSelect()});